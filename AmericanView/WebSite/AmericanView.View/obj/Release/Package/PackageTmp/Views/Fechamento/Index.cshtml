@{
    ViewBag.Title = "Fechamento";
}

@section breadcrumbs{
    <ol class="breadcrumb">
        <li><span class="glyphicon glyphicon-home"></span> <a href="@Url.Action("Index", "Home")" title="Home">Home</a></li>
        <li class="active">Fechamentos</li>
    </ol>
}

@section scripts {
    <script src="@Url.Content("/Content/js/app/Fechamento/Fechamento.js")" type="text/javascript"></script>
    <script type="text/javascript">
        /* -- Setar Class em expand menu -- */
        window.onload = setActiveMenu;
        function setActiveMenu() {
            $('li#usuarios').addClass('active');
            $('.mini-nav ul li#usuarios ul').attr('style', 'display: none !important;');
        }

        $(document).ready(function () {
            CarregarComponentes();
            $('#collapseFilter').collapse('show');
            $('#accordion .panel .panel-heading').children('h4').children('small').children('span').removeAttr('class');
            $('#accordion .panel .panel-heading').children('h4').children('small').children('span').attr('class', 'glyphicon glyphicon-chevron-down');
        });
    </script>
}

<h1>Fechamentos Mensais</h1>
<br />

<div class="panel-group" id="accordion" style="margin-right:35px">
    <div class="panel panel-primary">
        <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseFilter">
            <h4 class="panel-title">
                <small><span class="glyphicon glyphicon-chevron-right"></span></small> Filtros
            </h4>
        </div>
        <div id="collapseFilter" class="panel-collapse collapse">
            <div class="panel-body">
                <div class="row">
                    <form id="filter-form">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-2">
                                    <div class="form-group">
                                        <label for="selectMatriz"><strong>Código da Matriz</strong></label>
                                        <input id="selectMatriz" data-field="selectMatriz" style="width: 100%;" />
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label for="tbRazaoSocial"><strong>Razão Social</strong></label>
                                        <input id="tbRazaoSocial" type="text" class="k-textbox" name="tbRazaoSocial" placeholder="Selecione a Matriz" style="width: 100%; font-weight:bold" disabled="disabled">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <button type="button" id="btnPesquisar" class="btn btn-success btn-xs">
                                    <span class="glyphicon glyphicon-search"></span> Pesquisar
                                </button>
                                <button type="button" id="btnLimparPequisa" class="btn btn-danger btn-xs">
                                    <span class="glyphicon glyphicon-remove"></span> Limpar
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row" style="margin-bottom: 15px;margin-right:15px">
    <div class="col-sm-12">
        <div id="gridFechamento"></div>
    </div>
</div>

<div id="modalFechamentoLog" class="modal fade">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <center><h4 class="modal-title"><strong></strong></h4></center>
            </div>
            <div class="modal-body">
                @*Cabeçalho*@
                <div class="row" style="margin-left: 10px;">
                    <div class="form-group">
                        <label for="tbMatriz">Código da Matriz: </label>
                        <input id="tbMatriz" name="tbMatriz" type="text" class="k-textbox" style="width: 10%; font-weight:bold" disabled="disabled" />
                        <label for="tbRazaoSocial2" style="margin-left: 40px">Razão Social: </label>
                        <input id="tbRazaoSocial2"  type="text" class="k-textbox" name="tbRazaoSocial" style="width: 40%; font-weight:bold" disabled="disabled">
                        <label for="tbPeriodo" style="margin-left: 40px">Período: </label>
                        <input id="tbPeriodo" name="tbPeriodo" type="text" class="k-textbox" maxlength="6" style="width: 10%;font-weight:bold" disabled="disabled" />
                    </div>
                </div>
                <br />
                <div id="labelHistoricoFechamento">
                    <h3>Últimas Modificações</h3>
                </div>
                <br />
                @*Grid Histórico*@
                <div id="gridFechamentoLog"></div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnCancelar" class="btn btn-success btn-xs" onclick="javascript: { FecharModal(this); }">
                    <span class="glyphicon glyphicon-remove"></span> Fechar
                </button>
            </div>
        </div>
    </div>
</div>

<div id="modalAberturaFechamentoPeriodo" class="modal fade">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h4 class="modal-title"><strong></strong></h4></center>
            </div>
            <div class="modal-body">                
                <input type="hidden" id="idFechamento" />
                <input type="hidden" id="Status" />
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success btn-xs" onclick="javascript: { Acao(this); }">
                    <span class=" glyphicon glyphicon-ok"></span> Confirmar
                </button>
                <button type="button" class="btn btn-danger btn-xs" onclick="javascript: { FecharModal(this); }">
                    <span class="glyphicon glyphicon-remove"></span> Cancelar
                </button>
            </div>
        </div>
    </div>
</div>

<div id="modalJustificativa" class="modal fade">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">             
                <center><h2 class="modal-title" style="color:black;"><strong></strong></h2></center>                
            </div>
            <div class="modal-body">
                <input type="hidden" id="idFechamento" />
                <input type="hidden" id="Status" />               
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" style="padding-bottom: 0px;">
                        <div class="form-group">
                            <label for="txtUsuario">Usuário</label> <br />
                            <input type="text" class="k-textbox" id="txtUsuario" name="txtUsuario" style="width: 100%;font-weight:bold" disabled="disabled">
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" style="padding-bottom: 0px;">
                        <div class="form-group">
                            <label for="txtData">Data</label> <br />
                            <input type="text" class="k-textbox" id="txtData" name="txtData" placeholder="Data" style="width: 100%;font-weight:bold" disabled="disabled">
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding-bottom: 0px;">
                        <div class="form-group">
                            <label for="txtJustificativa">Justificativa</label> <br />
                            <textarea id="txtJustificativa" maxlength="500" rows="4" class="k-textbox" name="txtJustificativa" placeholder="Justificativa" style="width: 100%"></textarea><br />
                            <label>Caracteres restantes: </label>
                            <label id="caracteresRestantes">500</label>
                        </div>
                    </div>
                </div>               
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success btn-xs" onclick="javascript: { GravaJustificativa(this); }">
                    <span class=" glyphicon glyphicon-ok"></span> Confirmar
                </button>
                <button type="button" class="btn btn-danger btn-xs" onclick="javascript: { FecharModal(this); }">
                    <span class="glyphicon glyphicon-remove"></span> Cancelar
                </button>
            </div>
        </div>
    </div>
</div>

<div id="modalDescricaoJustificativa" class="modal fade">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h4 class="modal-title"><strong>Justificativa da reabertura do período</strong></h4></center>
            </div>
            <div class="modal-body"></div>
            <div class="modal-footer">
                <button type="button" id="btnFechar" class="btn btn-success btn-xs" onclick="javascript: { FecharModal(this); }">
                    <span class="glyphicon glyphicon-remove"></span> Fechar
                </button>
            </div>
        </div>
    </div>
</div>
