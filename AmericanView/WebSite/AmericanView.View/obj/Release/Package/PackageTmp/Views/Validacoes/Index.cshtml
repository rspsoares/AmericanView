@{
    ViewBag.Title = "Usuários";
}

@section breadcrumbs{
    <ol class="breadcrumb">
        <li><span class="glyphicon glyphicon-home"></span> <a href="@Url.Action("Index", "Home")" title="Home">Home</a></li>
        <li class="active">Validações</li>
    </ol>
}

@section scripts {
    <script src="@Url.Content("/Content/js/app/validacoes/validacoes.js")" type="text/javascript"></script>
    <script type="text/javascript">
        /* -- Setar Class em expand menu -- */
        window.onload = setActiveMenu;
        function setActiveMenu() {
            $('li#usuarios').addClass('active');
            $('.mini-nav ul li#usuarios ul').attr('style', 'display: none !important;');
        }
        $(document).ready(function () {
            CarregaComponentes();
            $('#collapseFilter').collapse('show');
            $('#accordion .panel .panel-heading').children('h4').children('small').children('span').removeAttr('class');
            $('#accordion .panel .panel-heading').children('h4').children('small').children('span').attr('class', 'glyphicon glyphicon-chevron-down');
        });
    </script>
}

<div id="divValidacoes" style="visibility:visible;">
    <h1>Validações</h1>
    <br />

    <div class="panel-group" id="accordion" style="margin-right:35px">
        <div class="panel panel-primary">
            <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseFilter">
                <h4 class="panel-title">
                    <small><span class="glyphicon glyphicon-chevron-right"></span></small> Filtros
                </h4>
            </div>
            <div id="collapseFilter" class="panel-collapse collapse">
                <div class="panel-body">
                    <div class="row">
                        <form id="filter-form">
                            <div class="col-sm-12">
                                <div class="row">
                                    <div class="col-sm-2">
                                        <div class="form-group">
                                            <label for="selectMatriz"><strong>Código da Matriz</strong></label>
                                            <input id="selectMatriz" data-field="selectMatriz" style="width: 100%;" />
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="tbRazaoSocial"><strong>Razão Social</strong></label>
                                            <input id="tbRazaoSocial" type="text" class="k-textbox" name="tbRazaoSocial" placeholder="Selecione a Matriz" style="width: 100%; font-weight:bold" disabled="disabled">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <button type="button" id="btnPesquisar" class="btn btn-success btn-xs">
                                        <span class="glyphicon glyphicon-search"></span> Pesquisar
                                    </button>
                                    <button type="button" id="btnLimparPequisa" class="btn btn-danger btn-xs">
                                        <span class="glyphicon glyphicon-remove"></span> Limpar
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row" style="margin-bottom: 15px;margin-right:15px">
        <div class="col-sm-12">
            <div id="gridValidacoes"></div>
        </div>
    </div>
</div>

<div id="divResultado" style="display:none">
    <div style="float: right;margin-right:35px">
        <button type="button" id="btnVoltar" class="btn btn-primary btn-xs" onclick="javascript: { ExibirDiv('divValidacoes'); }">
            <span class="glyphicon glyphicon-arrow-left"></span> Voltar
        </button>
    </div>

    <br />
    <h1>Resultados</h1>
    <br />
    <div class="row" style="margin-bottom: 15px;margin-right:15px">
        <div style="float: left; width:80%">
            <label for="tbFiltroResultado" style="margin-left: 15px">Pesquisar Mensagem: </label>
            <input id="tbFiltroResultado" type="text" data-field="Descricao" data-operator="contains" class="k-textbox filter" name="tbFiltroResultado" style="width: 40%;" maxlength="30">
            <button type="button" id="btnFiltrarResultados" class="btn btn-primary btn-xs">
                <span class="glyphicon glyphicon-search"></span> Pesquisar
            </button>
        </div>
        <div style="float: right;margin-right:15px">
            <button type="button" id="btnRevalidarPeriodo" class="btn btn-success btn-xs" onclick="javascript: { RevalidarPeriodo(); }">
                <span class="glyphicon glyphicon-refresh"></span> Revalidar Período
            </button>
        </div>
    </div>

    <div class="row" style="margin-bottom: 15px;margin-right:15px">
        <div class="col-sm-12">
            <div id="gridResultados"></div>
        </div>
    </div>
</div>

<div id="divDetalhamentoSumario" style="display:none">
    <div style="float: right;margin-right:35px">
        <button type="button" id="btnVoltar" class="btn btn-primary btn-xs" onclick="javascript: { ExibirDiv('divResultado'); }">
            <span class="glyphicon glyphicon-arrow-left"></span> Voltar
        </button>
    </div>

    <br />
    <h1>Detalhes</h1>
    <br />

    <div class="row" style="margin-left: 15px;margin-right:15px">
        <div class="form-group">
            <label for="tbRegra">Regra: </label>
            <input id="tbRegra" name="tbRegra" type="text" class="k-textbox" style="width: 20%; font-weight:bold" disabled="disabled" />
            <label for="tbDescricao" style="margin-left: 40px">Descrição: </label>
            <input id="tbDescricao" nam type="text" class="k-textbox" name="tbDescricao" style="width: 60%; font-weight:bold" disabled="disabled">
        </div>
    </div>

    <div class="row" style="margin-bottom: 15px;margin-right:15px">
        <div class="col-sm-12">
            <div id="gridDetalhamentoSumarioNota"></div>
        </div>
    </div>
</div>

<div id="divDetalhamentoNota" style="display:none;">
    <div style="float: right;margin-right:35px">
        <button type="button" id="btnVoltar" class="btn btn-primary btn-xs" onclick="javascript: { ExibirDiv('divResultado'); }">
            <span class="glyphicon glyphicon-arrow-left"></span> Voltar
        </button>
    </div>

    <h1>Detalhamento de Validações</h1>
    <br />

    <div class="row" style="margin-bottom: 15px;margin-right:15px">
        <div class="col-sm-12">
            <div id="gridDetalhamentoNotaRegras"></div>
        </div>
    </div>

    <br />
    <hr />

    <br />
    <h1>Detalhamento de Nota</h1>
    <br />

    <div class="row" style="margin-left: 5px;">
        <div class="form-group">
            <label>Nota Fiscal: </label>
            <input id="tbNumeroNF" name="tbNumeroNF" type="text" class="k-textbox" style="width: 10%; font-weight:bold" disabled="disabled" />
            <label style="margin-left: 5px">Série: </label>
            <input id="tbSerieNF" name="tbSerieNF" type="text" class="k-textbox" style="width: 5%; font-weight:bold" disabled="disabled">
            <label style="margin-left: 5px">UF: </label>
            <input id="tbUF" name="tbUF" type="text" class="k-textbox" style="width: 5%;font-weight:bold" disabled="disabled">
            <label style="margin-left: 5px">Data Doc.</label>
            <input id="tbDataDocumento" name="tbDataDocumento" type="text" class="k-textbox" style="width: 10%;font-weight:bold" disabled="disabled" />
            <label style="margin-left: 5px">Data Lancto.</label>
            <input id="tbDataLancamento" name="tbDataLancamento" type="text" class="k-textbox" style="width: 10%;font-weight:bold" disabled="disabled" />
            <label style="margin-left: 5px">Categoria: </label>
            <input id="selectCategoria" name="selectCategoria" data-field="selectCategoria" style="width: 25%;" />
        </div>
    </div>

    <div style="float:right;margin-right:35px">
        <label id="lbPeriodoFechado" style="color:red;margin-right: 15px;font-weight:bold"></label>
        <button type="button" id="btnSalvar" class="btn btn-success btn-xs" onclick="javascript: { SalvarNotaFiscal(); }">
            <span class="glyphicon glyphicon-floppy-disk"></span> Salvar Capa N.F.
        </button>
        <button type="button" id="btnCancelar" style="margin-left: 15px;" class="btn btn-danger btn-xs" onclick="javascript: { CancelarAlteracaoNotaFiscal(); }">
            <span class="glyphicon glyphicon-remove"></span> Cancelar Alterações
        </button>
    </div>

    <div class="row">
    </div>

    <br />

    <div class="row" style="margin-bottom: 15px;margin-right:15px">
        <div class="col-sm-12">
            <div id="gridItensNotaFiscal"></div>
        </div>
    </div>

</div>

<div id="modalEditarNotaFiscalItem" class="modal fade">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h4 class="modal-title"><strong>Edição do Item da Nota Fiscal</strong></h4></center>
            </div>
            <div class="modal-body">
                <input id="tbItemId" name="tbItemId" type="hidden" />
                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" style="padding-bottom: 1px;">
                        <div class="form-group">
                            <label>Nº Item: </label>
                            <input id="tbItemNumero" name="tbItemNumero" type="text" class="k-textbox" style="width: 100%; font-weight:bold" disabled="disabled" />
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" style="padding-bottom: 1px;">
                        <div class="form-group">
                            <label>CFOP: </label>
                            <input id="tbItemCFOP" name="tbItemCFOP" type="text" class="k-textbox" style="width: 100%" disabled="disabled">
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" style="padding-bottom: 1px;">
                        <div class="form-group">
                            <label>CFOP Referência: </label>
                            <input id="tbItemCFOPReferencia" name="tbItemCFOPReferencia" type="text" class="k-textbox" style="width: 100%" disabled="disabled">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" style="padding-bottom: 1px;">
                        <div class="form-group">
                            <label>Grupo Mercadoria: </label>
                            <input id="tbItemGrupoMaterial" name="tbItemDescricaoMaterial" type="text" class="k-textbox" style="width: 100%;" disabled="disabled">
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-9 col-sm-6 col-xs-12" style="padding-bottom: 1px;">
                        <div class="form-group">
                            <label>Descrição Material: </label>
                            <input id="tbItemDescricaoMaterial" name="tbItemDescricaoMaterial" type="text" class="k-textbox" style="width: 100%;" disabled="disabled">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" style="padding-bottom: 1px;">
                        <div class="form-group">
                            <label>Base de Cálculo ICMS: </label>
                            <input id="tbItemBaseCalculoICMS" name="tbItemTotalItem" type="text" class="k-textbox" style="width: 100%;text-align:right" maxlength="15">
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" style="padding-bottom: 1px;">
                        <div class="form-group">
                            <label style="margin-left: 5px">Total Item: </label>
                            <input id="tbItemTotalItem" name="tbItemTotalItem" type="text" class="k-textbox" style="width: 100%;text-align:right" maxlength="15">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div style="margin-left: 15px;">
                        <button type="button" id="btnItemAnterior" style="float:left" class="btn btn-primary btn-xs" onclick="javascript: { MoverItemAnterior(); }">
                            <span class="glyphicon glyphicon-arrow-left"></span> Anterior
                        </button>
                        <button type="button" id="btnItemProximo" style="float:right; margin-right: 15px;" class="btn btn-primary btn-xs" onclick="javascript: { MoverItemProximo(); }">
                            <span class="glyphicon glyphicon-arrow-right"></span> Próximo
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <label id="lbPeriodoFechadoItem" style="color:red;margin-right: 15px;font-weight:bold"></label>
                <button type="button" id="btnSalvarItem" class="btn btn-success btn-xs" onclick="javascript: { SalvarItemNotaFiscal(); }">
                    <span class="glyphicon glyphicon-floppy-disk"></span> Salvar Item
                </button>
                <button type="button" id="btnCancelarAlteracaoItem" class="btn btn-danger btn-xs" onclick="javascript: { FecharModal(this); }">
                    <span class="glyphicon glyphicon-remove"></span> Cancelar
                </button>
            </div>
        </div>
    </div>
</div>
